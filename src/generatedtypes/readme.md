## Open API Generated Zodios and Zod Objects

The `django_generated.ts` file is autogenerated via `pnpm run schema`. We then hack clean it via the `cleanup_django_generated.sh` a bit (\*):

- export the `endpoints` variable.
- remove generating the zodiosAPI and createClientAPI stuff at the end. We set that up ourselves.
- replace all `.passthrough()` to be default, which is `.strip()`.(\*\*)

## Other Limitations

There isn't an easy way to configure `openapi-zod-client` to import only the endpoints and schemas that we care about (\*\*\*).

We leave REST decimal strings as strings(\*). We don't transforms via zod because changing the autogenerated endpoints breaks things.

---

^(\*) The zodios types generated aren't perfect. The [openapi-zod-client](https://github.com/astahmer/openapi-zod-client) library doesn't transform string to numbers when it should. It doesn't use the appropriate read vs write variants of the schemas when it creates the endpoints. It misses other nuances.

^(\*\*) `.passthrough` allows additional fields to exist from API response w/o zod throwing validation errors. But it also keeps them around for the client and causes errors when trying to generate typescript types from these
zod objects. We switch it to `.strip()` manually so these additional fields are ignored and our types work fine.

^(\*\*\*) In some scenarios, using a tool like [openapi-endpoint-trimmer](https://github.com/andenacitelli/openapi-endpoint-trimmer) would work to reduce the schema doc. That works when there are specific endpoints we are/aren't interested in. However in this use case this app is geared to a specific authentication role-- customers. They have access to all endpoints but not to certain http methods (they are readonly).
